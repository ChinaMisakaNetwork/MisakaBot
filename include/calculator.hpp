#include<iostream>
using namespace std;
const char hjlskdhfalhsdfhcsdafhasdnlufhawhelfasdnf[7] = { '+', '-', '*', '/', '(', ')', '#' };
#define fhewuohfuhdsofhsdhfghdghdfhghruhuohsdfhosdaghofgoasdgfyqwegofgeysgfzdgoCfasfdguafoasdofvosdavfvdafvdsghavcgdavckvZKCvkFGAGDFASGKFCGSDFKV 1
#define ashdlfafsdasdfsfefasashfhsgyasdfglhfdjklhgfgjhtyjufgipjbklcvjblncjbjhasva 0
#define lwjqerluyhnxdyadacfqwegoafhnhsbdafjlnasbflnhsd -2
typedef char hfwerlfcdsfhsdsfasefaslfasldhbflhgarltgldrsgbldfg;
typedef int fhgbasdflbasdlfbdasfavafvgqwefdqweorgoqwefgohsdbvlbzfxdlvgblasdfgblsdfblghbsdflbfvglsadbfasd;
typedef struct dasbhfbasdfbkasdgfvasdfvghsdafksadvkcxvkbzxcvczxvzxcvvadsgfvdksafgasdvkfgvkzgdfvgxcvkzvxvfgvdsakfvgsdafgdvkczxvcgzxvvfdsafsdfghsdagfhgsdakhfhzvxchjxvkxcvgkxfsdaf {
	int data;
	struct dasbhfbasdfbkasdgfvasdfvghsdafksadvkcxvkbzxcvczxvzxcvvadsgfvdksafgasdvkfgvkzgdfvgxcvkzvxvfgvdsakfvgsdafgdvkczxvcgzxvvfdsafsdfghsdagfhgsdakhfhzvxchjxvkxcvgkxfsdaf* next;
} dasbhfbasdfbkasdgfvasdfvghsdafksadvkcxvkbzxcvczxvzxcvvadsgfvdksafgasdvkfgvkzgdfvgxcvkzvxvfgvdsakfvgsdafgdvkczxvcgzxvvfdsafsdfghsdagfhgsdakhfhzvxchjxvkxcvgkxfsdaf, * dafnsdfnhdculhslufhsaldughfgsgdfkgxkhgfkchgdfgkhsdgfhgsegfgsdlafblhasdbfasbdlfbzxcvguoryetoweyowerdfszov;

fhgbasdflbasdlfbdasfavafvgqwefdqweorgoqwefgohsdbvlbzfxdlvgblasdfgblsdfblghbsdflbfvglsadbfasd xchvzgregfyvdkszgdsgkyfksdvf(dafnsdfnhdculhslufhsaldughfgsgdfkgxkhgfkchgdfgkhsdgfhgsegfgsdlafblhasdbfasbdlfbzxcvguoryetoweyowerdfszov& S) {
	S = NULL;
	return fhewuohfuhdsofhsdhfghdghdfhghruhuohsdfhosdaghofgoasdgfyqwegofgeysgfzdgoCfasfdguafoasdofvosdavfvdafvdsghavcgdavckvZKCvkFGAGDFASGKFCGSDFKV;
}
bool fsdafhlflesghfgcsagdhfgksdhgfdzxhvhxbvbhrhduwgyfordygufdzvgoxzcvyoasdfghsdafdsfsdafasdf(dafnsdfnhdculhslufhsaldughfgsgdfkgxkhgfkchgdfgkhsdgfhgsegfgsdlafblhasdbfasbdlfbzxcvguoryetoweyowerdfszov S) {
	if (!S)
		return true;
	return false;
}
fhgbasdflbasdlfbdasfavafvgqwefdqweorgoqwefgohsdbvlbzfxdlvgblasdfgblsdfblghbsdflbfvglsadbfasd fasrhgoycgygxsyuvfdvdfbkgbdfsgsdfkgdfs(dafnsdfnhdculhslufhsaldughfgsgdfkgxkhgfkchgdfgkhsdgfhgsegfgsdlafblhasdbfasbdlfbzxcvguoryetoweyowerdfszov& S, hfwerlfcdsfhsdsfasefaslfasldhbflhgarltgldrsgbldfg e) {
	dasbhfbasdfbkasdgfvasdfvghsdafksadvkcxvkbzxcvczxvzxcvvadsgfvdksafgasdvkfgvkzgdfvgxcvkzvxvfgvdsakfvgsdafgdvkczxvcgzxvvfdsafsdfghsdagfhgsdakhfhzvxchjxvkxcvgkxfsdaf* p = new dasbhfbasdfbkasdgfvasdfvghsdafksadvkcxvkbzxcvczxvzxcvvadsgfvdksafgasdvkfgvkzgdfvgxcvkzvxvfgvdsakfvgsdafgdvkczxvcgzxvvfdsafsdfghsdagfhgsdakhfhzvxchjxvkxcvgkxfsdaf;
	if (!p) {
		return lwjqerluyhnxdyadacfqwegoafhnhsbdafjlnasbflnhsd;
	}
	p->data = e;
	p->next = S;
	S = p;
	return fhewuohfuhdsofhsdhfghdghdfhghruhuohsdfhosdaghofgoasdgfyqwegofgeysgfzdgoCfasfdguafoasdofvosdavfvdafvdsghavcgdavckvZKCvkFGAGDFASGKFCGSDFKV;
}
fhgbasdflbasdlfbdasfavafvgqwefdqweorgoqwefgohsdbvlbzfxdlvgblasdfgblsdfblghbsdflbfvglsadbfasd fdsufyyureyofgsdgvcxvkkhbfsadhghdskf(dafnsdfnhdculhslufhsaldughfgsgdfkgxkhgfkchgdfgkhsdgfhgsegfgsdlafblhasdbfasbdlfbzxcvguoryetoweyowerdfszov& S, hfwerlfcdsfhsdsfasefaslfasldhbflhgarltgldrsgbldfg& e) {
	dasbhfbasdfbkasdgfvasdfvghsdafksadvkcxvkbzxcvczxvzxcvvadsgfvdksafgasdvkfgvkzgdfvgxcvkzvxvfgvdsakfvgsdafgdvkczxvcgzxvvfdsafsdfghsdagfhgsdakhfhzvxchjxvkxcvgkxfsdaf* p;
	if (!S)
		return ashdlfafsdasdfsfefasashfhsgyasdfglhfdjklhgfgjhtyjufgipjbklcvjblncjbjhasva;
	e = S->data;
	p = S;
	S = S->next;
	delete p;
	return fhewuohfuhdsofhsdhfghdghdfhghruhuohsdfhosdaghofgoasdgfyqwegofgeysgfzdgoCfasfdguafoasdofvosdavfvdafvdsghavcgdavckvZKCvkFGAGDFASGKFCGSDFKV;
}
fhgbasdflbasdlfbdasfavafvgqwefdqweorgoqwefgohsdbvlbzfxdlvgblasdfgblsdfblghbsdflbfvglsadbfasd fhrashgcfhgsfgxkvbxcgvlbhrdstlgdfsghdf(dafnsdfnhdculhslufhsaldughfgsgdfkgxkhgfkchgdfgkhsdgfhgsegfgsdlafblhasdbfasbdlfbzxcvguoryetoweyowerdfszov& S) {
	if (!S)
		return ashdlfafsdasdfsfefasashfhsgyasdfglhfdjklhgfgjhtyjufgipjbklcvjblncjbjhasva;

	return S->data;
}
bool sdnfbkcwhyurfbxzgkcvgbxhfgkhsdbghdahfvsdgkvfasd(char ch) {//判断ch是否为运算符
	for (int i = 0; i < 7; i++) {
		if (ch == hjlskdhfalhsdfhcsdafhasdnlufhawhelfasdnf[i]) {
			return true;
		}
	}
	return false;
}
char fbsdahbfchsdaragbdgfkdgzxkfgsdbkgbdfgdfsgdfbsg(char theta1, char theta2) {//判断运算符优先级
	if ((theta1 == '(' && theta2 == ')') || (theta1 == '#' && theta2 == '#')) {
		return '=';
	}
	else if (theta1 == '(' || theta1 == '#' || theta2 == '(' || (theta1
		== '+' || theta1 == '-') && (theta2 == '*' || theta2 == '/')) {
		return '<';
	}
	else
		return '>';
}
char fhuisdhfhuwerfhsdhflxcgvhbfdbskgbdshlfDSFA(char first, char theta, char second) {//计算两数运算结果
	switch (theta) {
	case '+':
		return (first - '0') + (second - '0') + 48;
	case '-':
		return (first - '0') - (second - '0') + 48;
	case '*':
		return (first - '0') * (second - '0') + 48;
	case '/':
		return (first - '0') / (second - '0') + 48;
	}
	return 0;
}

//算法3.22　表达式求值
int EvaluateExpression(string s) {//算术表达式求值的算符优先算法，设OPTR和OPND分别为运算符栈和操作数栈
	dafnsdfnhdculhslufhsaldughfgsgdfkgxkhgfkchgdfgkhsdgfhgsegfgsdlafblhasdbfasbdlfbzxcvguoryetoweyowerdfszov OPTR, OPND;
	char ch, theta, a, b, x, top;
	xchvzgregfyvdkszgdsgkyfksdvf(OPND); //初始化OPND栈
	xchvzgregfyvdkszgdsgkyfksdvf(OPTR); //初始化OPTR栈
	fasrhgoycgygxsyuvfdvdfbkgbdfsgsdfkgdfs(OPTR, '#'); //将表达式起始符“#”压入OPTR栈
	stringstream X(s);
	X >> ch;
	while (ch != '#' || (fhrashgcfhgsfgxkvbxcgvlbhrdstlgdfsghdf(OPTR) != '#')) //表达式没有扫描完毕或OPTR的栈顶元素不为“#”
	{
		if (!sdnfbkcwhyurfbxzgkcvgbxhfgkhsdbghdahfvsdgkvfasd(ch)) {
			fasrhgoycgygxsyuvfdvdfbkgbdfsgsdfkgdfs(OPND, ch);
			X >> ch;
		} //ch不是运算符则进OPND栈
		else
			switch (fbsdahbfchsdaragbdgfkdgzxkfgsdbkgbdfgdfsgdfbsg(fhrashgcfhgsfgxkvbxcgvlbhrdstlgdfsghdf(OPTR), ch)) //比较OPTR的栈顶元素和ch的优先级
			{
			case '<':
				fasrhgoycgygxsyuvfdvdfbkgbdfsgsdfkgdfs(OPTR, ch);
				X >> ch; //当前字符ch压入OPTR栈，读入下一字符ch
				break;
			case '>':
				fdsufyyureyofgsdgvcxvkkhbfsadhghdskf(OPTR, theta); //弹出OPTR栈顶的运算符
				fdsufyyureyofgsdgvcxvkkhbfsadhghdskf(OPND, b);
				fdsufyyureyofgsdgvcxvkkhbfsadhghdskf(OPND, a); //弹出OPND栈顶的两个运算数
				fasrhgoycgygxsyuvfdvdfbkgbdfsgsdfkgdfs(OPND, fhuisdhfhuwerfhsdhflxcgvhbfdbskgbdshlfDSFA(a, theta, b)); //将运算结果压入OPND栈
				break;
			case '=': //OPTR的栈顶元素是“(”且ch是“)”
				fdsufyyureyofgsdgvcxvkkhbfsadhghdskf(OPTR, x);
				X >> ch; //弹出OPTR栈顶的“(”，读入下一字符ch
				break;
			} //switch
	} //while
	return fhrashgcfhgsfgxkvbxcgvlbhrdstlgdfsghdf(OPND)-48; //OPND栈顶元素即为表达式求值结果
}